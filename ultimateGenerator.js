// 终极题库生成器 - 生成剩余单元的大量题目
const ultimateGenerator = {
    baseId: 15000,
    shuffle(arr) { const r=[...arr]; for(let i=r.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[r[i],r[j]]=[r[j],r[i]];} return r; },
    pick(arr) { return arr[Math.floor(Math.random()*arr.length)]; },
    makeQ(id,unit,diff,q,c,w,a) { const opts=this.shuffle([c,...w.slice(0,3)]); const idx=opts.indexOf(c); const L=["A","B","C","D"];
        return {id,type:"choice",unit,difficulty:diff,score:2,content:q+"（　　）",options:opts.map((o,i)=>`${L[i]}. ${o}`),answer:L[idx],analysis:a}; },

    // 泌尿系统大题库
    genUrinary() {
        const qs = []; let id = this.baseId;
        const urinary = [
            {q:"形成尿液的器官是",a:"肾脏",w:["输尿管","膀胱","尿道"]},
            {q:"输送尿液的器官是",a:"输尿管",w:["肾脏","膀胱","尿道"]},
            {q:"储存尿液的器官是",a:"膀胱",w:["肾脏","输尿管","尿道"]},
            {q:"排出尿液的器官是",a:"尿道",w:["肾脏","输尿管","膀胱"]},
            {q:"肾脏的结构和功能单位是",a:"肾单位",w:["肾小球","肾小囊","肾小管"]},
            {q:"肾单位由什么组成",a:"肾小球、肾小囊、肾小管",w:["肾脏和输尿管","膀胱和尿道","肾皮质和肾髓质"]},
            {q:"肾小球是",a:"毛细血管球",w:["动脉","静脉","淋巴管"]},
            {q:"肾小球的过滤作用形成",a:"原尿",w:["尿液","血液","淋巴"]},
            {q:"肾小管的重吸收作用形成",a:"尿液",w:["原尿","血液","淋巴"]},
            {q:"原尿中有而尿液中没有的物质是",a:"葡萄糖",w:["水","无机盐","尿素"]},
            {q:"血液中有而原尿中没有的物质是",a:"血细胞和大分子蛋白质",w:["水","无机盐","葡萄糖"]},
            {q:"尿液中尿素含量比原尿高是因为",a:"水被重吸收",w:["尿素被分泌","蛋白质被分解","葡萄糖被吸收"]},
            {q:"正常人每天形成原尿约",a:"180升",w:["1.5升","18升","1800升"]},
            {q:"正常人每天排出尿液约",a:"1.5升",w:["180升","15升","0.15升"]},
            {q:"尿液中出现葡萄糖可能是",a:"肾小管病变或糖尿病",w:["肾小球病变","膀胱病变","尿道病变"]},
            {q:"尿液中出现蛋白质可能是",a:"肾小球病变",w:["肾小管病变","膀胱病变","尿道病变"]},
            {q:"尿液中出现红细胞可能是",a:"肾小球病变",w:["肾小管病变","膀胱病变","正常现象"]},
            {q:"人体排泄的途径有",a:"排尿、排汗、呼气",w:["只有排尿","排尿和排便","排尿和呼气"]},
            {q:"排便属于",a:"排遗",w:["排泄","分泌","吸收"]},
            {q:"皮肤排泄的废物主要是",a:"水、无机盐、尿素",w:["二氧化碳","氧气","有机物"]}
        ];
        urinary.forEach(item => { qs.push(this.makeQ(id++,"unit8","medium",item.q,item.a,item.w,`${item.a}是正确答案。`)); });
        this.baseId = id; return qs;
    },

    // 神经系统大题库
    genNervous() {
        const qs = []; let id = this.baseId;
        const nervous = [
            {q:"神经系统由什么组成",a:"中枢神经系统和周围神经系统",w:["脑和脊髓","脑神经和脊神经","大脑和小脑"]},
            {q:"中枢神经系统包括",a:"脑和脊髓",w:["脑神经和脊神经","大脑和小脑","感觉神经和运动神经"]},
            {q:"周围神经系统包括",a:"脑神经和脊神经",w:["脑和脊髓","大脑和小脑","感觉神经和运动神经"]},
            {q:"神经系统结构和功能的基本单位是",a:"神经元",w:["神经","脑","脊髓"]},
            {q:"神经元的结构包括",a:"细胞体和突起",w:["细胞核和细胞质","轴突和树突","神经和神经节"]},
            {q:"神经元的突起包括",a:"树突和轴突",w:["细胞体","细胞核","神经"]},
            {q:"树突的功能是",a:"接受刺激，传入细胞体",w:["传出神经冲动","产生神经冲动","储存信息"]},
            {q:"轴突的功能是",a:"传出神经冲动",w:["接受刺激","产生神经冲动","储存信息"]},
            {q:"大脑皮层的功能是",a:"高级神经活动中枢",w:["呼吸中枢","心跳中枢","反射中枢"]},
            {q:"小脑的功能是",a:"协调运动、维持平衡",w:["思维中枢","呼吸中枢","心跳中枢"]},
            {q:"脑干的功能是",a:"呼吸、心跳等生命中枢",w:["思维中枢","运动中枢","语言中枢"]},
            {q:"脊髓的功能是",a:"反射和传导",w:["思维","记忆","语言"]},
            {q:"反射的结构基础是",a:"反射弧",w:["神经元","神经","脊髓"]},
            {q:"反射弧由什么组成",a:"感受器、传入神经、神经中枢、传出神经、效应器",w:["神经元和神经","脑和脊髓","感觉神经和运动神经"]},
            {q:"下列属于非条件反射的是",a:"膝跳反射",w:["望梅止渴","谈虎色变","画饼充饥"]},
            {q:"下列属于条件反射的是",a:"望梅止渴",w:["膝跳反射","眨眼反射","缩手反射"]},
            {q:"条件反射的特点是",a:"后天学习获得",w:["先天就有","不需要学习","反射中枢在脊髓"]},
            {q:"非条件反射的特点是",a:"先天就有",w:["后天学习获得","反射中枢在大脑","可以消退"]},
            {q:"条件反射的神经中枢在",a:"大脑皮层",w:["脊髓","脑干","小脑"]},
            {q:"膝跳反射的神经中枢在",a:"脊髓",w:["大脑皮层","脑干","小脑"]},
            {q:"缩手反射的神经中枢在",a:"脊髓",w:["大脑皮层","脑干","小脑"]},
            {q:"排尿反射的神经中枢在",a:"脊髓",w:["大脑皮层","脑干","小脑"]}
        ];
        nervous.forEach(item => { qs.push(this.makeQ(id++,"unit9","medium",item.q,item.a,item.w,`${item.a}是正确答案。`)); });
        this.baseId = id; return qs;
    },

    // 内分泌系统大题库
    genEndocrine() {
        const qs = []; let id = this.baseId;
        const endocrine = [
            {q:"内分泌腺的特点是",a:"没有导管，激素直接进入血液",w:["有导管","激素进入消化道","激素进入体腔"]},
            {q:"外分泌腺的特点是",a:"有导管，分泌物通过导管排出",w:["没有导管","分泌物进入血液","分泌物进入体腔"]},
            {q:"下列属于内分泌腺的是",a:"垂体",w:["唾液腺","汗腺","皮脂腺"]},
            {q:"下列属于外分泌腺的是",a:"唾液腺",w:["垂体","甲状腺","肾上腺"]},
            {q:"生长激素由什么分泌",a:"垂体",w:["甲状腺","胰岛","肾上腺"]},
            {q:"甲状腺激素由什么分泌",a:"甲状腺",w:["垂体","胰岛","肾上腺"]},
            {q:"胰岛素由什么分泌",a:"胰岛",w:["垂体","甲状腺","肾上腺"]},
            {q:"肾上腺素由什么分泌",a:"肾上腺",w:["垂体","甲状腺","胰岛"]},
            {q:"生长激素的作用是",a:"促进生长",w:["促进新陈代谢","降低血糖","升高血压"]},
            {q:"甲状腺激素的作用是",a:"促进新陈代谢和发育",w:["促进生长","降低血糖","升高血压"]},
            {q:"胰岛素的作用是",a:"降低血糖浓度",w:["升高血糖浓度","促进生长","促进发育"]},
            {q:"幼年生长激素分泌不足会导致",a:"侏儒症",w:["巨人症","呆小症","糖尿病"]},
            {q:"幼年生长激素分泌过多会导致",a:"巨人症",w:["侏儒症","呆小症","糖尿病"]},
            {q:"成年生长激素分泌过多会导致",a:"肢端肥大症",w:["侏儒症","巨人症","糖尿病"]},
            {q:"幼年甲状腺激素分泌不足会导致",a:"呆小症",w:["侏儒症","巨人症","糖尿病"]},
            {q:"成年甲状腺激素分泌过多会导致",a:"甲亢",w:["侏儒症","巨人症","糖尿病"]},
            {q:"甲状腺激素分泌不足会导致",a:"甲状腺肿大",w:["侏儒症","巨人症","糖尿病"]},
            {q:"胰岛素分泌不足会导致",a:"糖尿病",w:["侏儒症","巨人症","呆小症"]},
            {q:"糖尿病患者尿液中含有",a:"葡萄糖",w:["蛋白质","血细胞","脂肪"]}
        ];
        endocrine.forEach(item => { qs.push(this.makeQ(id++,"unit9","medium",item.q,item.a,item.w,`${item.a}是正确答案。`)); });
        this.baseId = id; return qs;
    },

    // 眼和视觉大题库
    genEye() {
        const qs = []; let id = this.baseId;
        const eye = [
            {q:"眼球的结构中，能调节进入眼内光线多少的是",a:"瞳孔",w:["角膜","晶状体","视网膜"]},
            {q:"眼球的结构中，能折射光线形成物像的是",a:"晶状体",w:["角膜","瞳孔","视网膜"]},
            {q:"眼球的结构中，能感受光刺激的是",a:"视网膜",w:["角膜","晶状体","瞳孔"]},
            {q:"眼球的结构中，相当于照相机镜头的是",a:"晶状体",w:["角膜","瞳孔","视网膜"]},
            {q:"眼球的结构中，相当于照相机光圈的是",a:"瞳孔",w:["角膜","晶状体","视网膜"]},
            {q:"眼球的结构中，相当于照相机底片的是",a:"视网膜",w:["角膜","晶状体","瞳孔"]},
            {q:"光线强时瞳孔",a:"缩小",w:["放大","不变","先大后小"]},
            {q:"光线弱时瞳孔",a:"放大",w:["缩小","不变","先小后大"]},
            {q:"看近处物体时晶状体",a:"变厚，曲度变大",w:["变薄，曲度变小","不变","先厚后薄"]},
            {q:"看远处物体时晶状体",a:"变薄，曲度变小",w:["变厚，曲度变大","不变","先薄后厚"]},
            {q:"近视眼的成因是",a:"晶状体曲度过大或眼球前后径过长",w:["晶状体曲度过小","眼球前后径过短","角膜曲度过小"]},
            {q:"远视眼的成因是",a:"晶状体曲度过小或眼球前后径过短",w:["晶状体曲度过大","眼球前后径过长","角膜曲度过大"]},
            {q:"近视眼物像落在",a:"视网膜前方",w:["视网膜后方","视网膜上","晶状体上"]},
            {q:"远视眼物像落在",a:"视网膜后方",w:["视网膜前方","视网膜上","晶状体上"]},
            {q:"近视眼应佩戴",a:"凹透镜",w:["凸透镜","平面镜","三棱镜"]},
            {q:"远视眼应佩戴",a:"凸透镜",w:["凹透镜","平面镜","三棱镜"]},
            {q:"视觉形成的部位是",a:"大脑皮层的视觉中枢",w:["视网膜","晶状体","视神经"]},
            {q:"预防近视的方法是",a:"注意用眼卫生，不长时间近距离用眼",w:["多吃肉","多睡觉","多运动"]}
        ];
        eye.forEach(item => { qs.push(this.makeQ(id++,"unit9","easy",item.q,item.a,item.w,`${item.a}是正确答案。`)); });
        this.baseId = id; return qs;
    },

    // 生殖发育大题库
    genReproduction() {
        const qs = []; let id = this.baseId;
        const reproduction = [
            {q:"人体发育的起点是",a:"受精卵",w:["卵细胞","精子","胚胎"]},
            {q:"精子和卵细胞结合的场所是",a:"输卵管",w:["子宫","卵巢","阴道"]},
            {q:"胚胎发育的场所是",a:"子宫",w:["输卵管","卵巢","阴道"]},
            {q:"胎儿与母体进行物质交换的结构是",a:"胎盘",w:["脐带","子宫","羊水"]},
            {q:"产生卵细胞的器官是",a:"卵巢",w:["子宫","输卵管","阴道"]},
            {q:"产生精子的器官是",a:"睾丸",w:["附睾","前列腺","输精管"]},
            {q:"分泌雌性激素的器官是",a:"卵巢",w:["子宫","输卵管","垂体"]},
            {q:"分泌雄性激素的器官是",a:"睾丸",w:["附睾","前列腺","垂体"]},
            {q:"青春期的主要特征是",a:"生殖器官发育成熟，出现第二性征",w:["身高增长","体重增加","智力发育"]},
            {q:"男性的第二性征包括",a:"喉结突出、声音变粗、长胡须",w:["身高增长","体重增加","智力发育"]},
            {q:"女性的第二性征包括",a:"乳房发育、声音变细、骨盆变宽",w:["身高增长","体重增加","智力发育"]},
            {q:"青蛙的发育属于",a:"变态发育",w:["直接发育","完全变态","不完全变态"]},
            {q:"家蚕的发育属于",a:"完全变态发育",w:["不完全变态","直接发育","变态发育"]},
            {q:"蝗虫的发育属于",a:"不完全变态发育",w:["完全变态","直接发育","变态发育"]},
            {q:"完全变态发育经历的阶段是",a:"卵→幼虫→蛹→成虫",w:["卵→若虫→成虫","卵→幼虫→成虫","卵→蛹→成虫"]},
            {q:"不完全变态发育经历的阶段是",a:"卵→若虫→成虫",w:["卵→幼虫→蛹→成虫","卵→幼虫→成虫","卵→蛹→成虫"]},
            {q:"下列属于完全变态发育的昆虫是",a:"蜜蜂、蝴蝶、蚊子、苍蝇",w:["蝗虫","蟋蟀","螳螂"]},
            {q:"下列属于不完全变态发育的昆虫是",a:"蝗虫、蟋蟀、螳螂、蜻蜓",w:["蜜蜂","蝴蝶","苍蝇"]},
            {q:"鸟卵中将来发育成雏鸟的结构是",a:"胚盘",w:["卵黄","卵白","卵壳"]},
            {q:"鸟卵中为胚胎发育提供营养的结构是",a:"卵黄和卵白",w:["胚盘","卵壳","气室"]},
            {q:"下列属于有性生殖的是",a:"种子繁殖",w:["扦插","嫁接","组织培养"]},
            {q:"下列属于无性生殖的是",a:"扦插、嫁接、组织培养",w:["种子繁殖","人工授粉","杂交育种"]},
            {q:"无性生殖的优点是",a:"保持亲本优良性状",w:["后代变异大","适应性强","繁殖速度慢"]},
            {q:"有性生殖的优点是",a:"后代具有双亲遗传特性，变异性大",w:["保持亲本性状","繁殖速度快","操作简单"]}
        ];
        reproduction.forEach(item => { qs.push(this.makeQ(id++,"unit10","medium",item.q,item.a,item.w,`${item.a}是正确答案。`)); });
        this.baseId = id; return qs;
    },

    // 遗传变异大题库
    genGenetics() {
        const qs = []; let id = this.baseId;
        const genetics = [
            {q:"遗传信息的载体是",a:"DNA",w:["蛋白质","染色体","细胞核"]},
            {q:"基因是",a:"有遗传效应的DNA片段",w:["DNA分子","染色体","蛋白质"]},
            {q:"染色体由什么组成",a:"DNA和蛋白质",w:["只有DNA","只有蛋白质","RNA和蛋白质"]},
            {q:"人体细胞中有多少对染色体",a:"23对",w:["22对","24对","46对"]},
            {q:"人体细胞中有多少条染色体",a:"46条",w:["23条","44条","48条"]},
            {q:"人体细胞中常染色体有",a:"22对",w:["23对","1对","44对"]},
            {q:"人体细胞中性染色体有",a:"1对",w:["22对","23对","2对"]},
            {q:"男性的性染色体组成是",a:"XY",w:["XX","YY","XO"]},
            {q:"女性的性染色体组成是",a:"XX",w:["XY","YY","XO"]},
            {q:"决定生男生女的是",a:"父亲的精子类型",w:["母亲的卵细胞","受精时的环境","胚胎发育过程"]},
            {q:"相对性状是指",a:"同种生物同一性状的不同表现形式",w:["不同生物的相同性状","同种生物的不同性状","不同生物的不同性状"]},
            {q:"下列属于相对性状的是",a:"豌豆的高茎和矮茎",w:["人的身高和体重","兔的长毛和白毛","番茄的红果和圆果"]},
            {q:"显性性状是指",a:"杂交后代中表现出来的性状",w:["出现频率高的性状","对生物有利的性状","常见的性状"]},
            {q:"隐性性状是指",a:"杂交后代中被掩盖的性状",w:["出现频率低的性状","对生物不利的性状","少见的性状"]},
            {q:"纯合子是指",a:"基因组成相同的个体",w:["基因组成不同的个体","只有显性基因的个体","只有隐性基因的个体"]},
            {q:"杂合子是指",a:"基因组成不同的个体",w:["基因组成相同的个体","只有显性基因的个体","只有隐性基因的个体"]},
            {q:"下列属于可遗传变异的是",a:"基因突变、基因重组、染色体变异",w:["晒黑的皮肤","锻炼后发达的肌肉","整容后的双眼皮"]},
            {q:"下列属于不可遗传变异的是",a:"晒黑的皮肤",w:["基因突变","基因重组","染色体变异"]},
            {q:"可遗传变异的原因是",a:"遗传物质发生改变",w:["环境条件改变","生活习惯改变","营养条件改变"]},
            {q:"杂交育种利用的原理是",a:"基因重组",w:["基因突变","染色体变异","不可遗传变异"]}
        ];
        genetics.forEach(item => { qs.push(this.makeQ(id++,"unit11","medium",item.q,item.a,item.w,`${item.a}是正确答案。`)); });
        this.baseId = id; return qs;
    },

    // 进化大题库
    genEvolution() {
        const qs = []; let id = this.baseId;
        const evolution = [
            {q:"地球上最早出现的生物是",a:"原始的单细胞生物",w:["原始的多细胞生物","原始的藻类","原始的鱼类"]},
            {q:"生物进化的最直接证据是",a:"化石",w:["比较解剖学","胚胎学","分子生物学"]},
            {q:"化石是指",a:"保存在地层中的古生物遗体、遗物或遗迹",w:["现存的生物","灭绝的生物","古代的岩石"]},
            {q:"越古老的地层中",a:"生物越简单、越低等",w:["生物越复杂","生物越高等","生物种类越多"]},
            {q:"自然选择学说的提出者是",a:"达尔文",w:["孟德尔","拉马克","林奈"]},
            {q:"自然选择的内容包括",a:"过度繁殖、生存斗争、遗传变异、适者生存",w:["只有适者生存","只有遗传变异","只有生存斗争"]},
            {q:"生物进化的内因是",a:"遗传和变异",w:["自然选择","生存斗争","适者生存"]},
            {q:"生物进化的外因是",a:"自然选择",w:["遗传和变异","基因突变","染色体变异"]},
            {q:"生物进化的方向是由什么决定的",a:"自然选择",w:["遗传","变异","基因突变"]},
            {q:"长颈鹿的长颈形成的原因是",a:"自然选择的结果",w:["经常伸长脖子","人工选择","定向变异"]},
            {q:"生物进化的总体趋势是",a:"由简单到复杂、由低等到高等、由水生到陆生",w:["由复杂到简单","由高等到低等","由陆生到水生"]},
            {q:"动物进化的顺序是",a:"鱼类→两栖类→爬行类→鸟类和哺乳类",w:["两栖类→鱼类→爬行类","爬行类→两栖类→鱼类","哺乳类→鸟类→爬行类"]},
            {q:"植物进化的顺序是",a:"藻类→苔藓→蕨类→裸子植物→被子植物",w:["苔藓→藻类→蕨类","蕨类→苔藓→藻类","被子植物→裸子植物"]},
            {q:"人类和类人猿的共同祖先是",a:"森林古猿",w:["黑猩猩","大猩猩","猴子"]},
            {q:"人类进化的主要特征是",a:"直立行走、制造工具、产生语言",w:["体毛减少","脑容量增大","牙齿变小"]}
        ];
        evolution.forEach(item => { qs.push(this.makeQ(id++,"unit12","medium",item.q,item.a,item.w,`${item.a}是正确答案。`)); });
        this.baseId = id; return qs;
    },

    generateAll() {
        return [
            ...this.genUrinary(),
            ...this.genNervous(),
            ...this.genEndocrine(),
            ...this.genEye(),
            ...this.genReproduction(),
            ...this.genGenetics(),
            ...this.genEvolution()
        ];
    }
};
